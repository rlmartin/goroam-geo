goroam.controls.__popup_map_id="<%= Constant::get(:css_prefix) %>popup_map";goroam.controls.close_popup=function(){if(goroam.controls.__popup_container){goroam.controls.__popup_container.style.display="none";goroam.controls.__popup_div.className="<%= Constant::get(:css_prefix) %>popup_div";while(goroam.controls.__popup_text.childNodes.length>0){goroam.controls.__popup_text.removeChild(goroam.controls.__popup_text.firstChild)}}};goroam.controls.create_popup_wrapper=function(){if(!goroam.controls.__popup_container){var A=document.createElement("div");A.style.height="100%";A.style.left="0px";A.style.position="absolute";A.style.top="0px";A.style.width="100%";A.style.zoom=1;goroam.dhtml.append_to_body(A);goroam.controls.__popup_container=A}if(!goroam.controls.__popup_obscurer){var A=document.createElement("div");A.className="<%= Constant::get(:css_prefix) %>popup_background";goroam.controls.__popup_container.appendChild(A);goroam.controls.__popup_obscurer=A;goroam.event.bindDom(goroam.controls.__popup_obscurer,"click",goroam.controls.__popup_obscurer,goroam.controls.close_popup)}if(!goroam.controls.__popup_div){var A=document.createElement("div");A.className="<%= Constant::get(:css_prefix) %>popup_div";goroam.controls.__popup_container.appendChild(A);goroam.controls.__popup_div=A}if(!goroam.controls.__popup_text){var A=document.createElement("div");A.className="<%= Constant::get(:css_prefix) %>popup_text";goroam.controls.__popup_div.appendChild(A);goroam.controls.__popup_text=A}if(!goroam.controls.__popup_close_button){var D=document.createElement("div");D.className="<%= Constant::get(:css_prefix) %>popup_close_button";D.title="<%= Constant::get(:close_text) %>";goroam.controls.__popup_div.appendChild(D);goroam.controls.__popup_close_button=D;goroam.event.bindDom(goroam.controls.__popup_close_button,"click",goroam.controls.__popup_close_button,goroam.controls.close_popup)}var C=goroam.dhtml.get_body();if(C&&C.scrollHeight){var E=Math.max(C.scrollHeight,C.clientHeight);var B=Math.max(C.scrollWidth,C.clientWidth);goroam.controls.__popup_obscurer.style.height=E+"px";goroam.controls.__popup_obscurer.style.width=B+"px";goroam.controls.__popup_div.style.top=((window.pageYOffset||C.scrollTop||document.documentElement.scrollTop)+10)+"px"}goroam.controls.__popup_container.style.display="block"};goroam.controls.popup=function(A,B){goroam.controls.create_popup_wrapper();goroam.controls.__popup_text.innerHTML=A;goroam.dhtml.edit_class_name(goroam.controls.__popup_div,"msg_box"+(B?" "+B:""))};goroam.controls.popup_map=function(C,D){goroam.controls.create_popup_wrapper();if(!goroam.controls.__popup_map){var B=document.createElement("div");B.id=goroam.controls.__popup_map_id;goroam.controls.__popup_map=B}goroam.dhtml.edit_class_name(goroam.controls.__popup_div,"popup_map");goroam.controls.__popup_text.appendChild(goroam.controls.__popup_map);var A=goroam.google.maps.get_map(goroam.controls.__popup_map_id);A.recenter_active_marker(C,(D||parseInt("<%= Constant::get(:default_popup_map_zoom) %>")));A.checkResize()};goroam.controls.popup_window=function(F,A,B,D,C,G){D=(D||"");var I=0,H=0;if(window.screen){if(!A){A=0.9*window.screen.height}if(!B){B=0.9*window.screen.width}H=(window.screen.height/2)-(A/2);I=(window.screen.width/2)-(B/2)}else{if(!A){A=300}if(!B){B=200}}var E="";if(C){E+="location=yes,directories=yes,menubar=yes"}else{E+="location=no,directories=no,menubar=no"}if(G){E+=",resizable=yes,scrollbars=yes"}else{E+=",resizable=no,scrollbars=no"}E+=",status=yes,titlebar=yes,toolbar=no,height="+A+"px,width="+B+"px,screenX="+I+",screenY="+H+",left="+I+",top="+H;return window.open(F,D,E)}